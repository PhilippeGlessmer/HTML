<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menu Vertical Bootstrap 5 - Avec ic√¥nes FontAwesome</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
document.addEventListener("DOMContentLoaded", function () {
    let menuItems = document.querySelectorAll(".collapse");

    menuItems.forEach(item => {
        item.addEventListener("show.bs.collapse", function () {
            let parent = item.parentElement.closest(".list-group"); 
            if (parent) {
                let siblings = parent.querySelectorAll(".collapse.show");
                siblings.forEach(sibling => {
                    if (sibling !== item && !sibling.contains(item)) {
                        let instance = bootstrap.Collapse.getInstance(sibling) || new bootstrap.Collapse(sibling, {toggle: false});
                        instance.hide();
                        updateIcon(sibling, false);
                    }
                });
            }
            updateIcon(item, true);

            // üî• Ouvrir "En cours" UNIQUEMENT si aucun autre sous-menu Niveau 2 est en train de s'ouvrir
            if (item.id.startsWith("submenu1_")) {
                let niveau1Id = item.id.split("_")[1]; 
                let enCoursMenu = document.querySelector(`#submenu2_${niveau1Id}_1`);

                // V√©rifier uniquement les sous-menus existants
                let otherMenus = [
                    document.querySelector(`#submenu2_${niveau1Id}_2`),
                    document.querySelector(`#submenu2_${niveau1Id}_3`),
                    document.querySelector(`#submenu2_${niveau1Id}_4`)
                ].filter(menu => menu !== null); // üî• Filtrer les menus non d√©finis

                let isUserOpeningAnotherSubmenu = otherMenus.some(menu => menu.classList.contains("collapsing"));

                // üî• Utilisation d'un setTimeout pour √©viter la boucle infinie
                setTimeout(() => {
                    if (enCoursMenu && !isUserOpeningAnotherSubmenu) {
                        let instance = bootstrap.Collapse.getInstance(enCoursMenu) || new bootstrap.Collapse(enCoursMenu, {toggle: false});
                        instance.show();
                    }
                }, 10); // üî• Petit d√©lai pour √©viter la boucle infinie
            }

            // üî• Fermeture automatique des sous-menus Niveau 2 du m√™me parent
            if (item.id.startsWith("submenu2_")) {
                let parentMenu = item.parentElement.closest(".collapse"); // Trouver le parent Niveau 1
                if (parentMenu) {
                    let sameLevelSiblings = parentMenu.querySelectorAll(".collapse.show");
                    sameLevelSiblings.forEach(sibling => {
                        if (sibling !== item && sibling.parentElement.closest(".collapse") === parentMenu) {
                            let instance = bootstrap.Collapse.getInstance(sibling) || new bootstrap.Collapse(sibling, {toggle: false});
                            instance.hide();
                            updateIcon(sibling, false);
                        }
                    });
                }
            }
        });

        item.addEventListener("hide.bs.collapse", function () {
            updateIcon(item, false);
        });
    });

    function updateIcon(element, isOpen) {
        let toggleButton = document.querySelector(`[href="#${element.id}"]`);
        if (toggleButton) {
            let icon = toggleButton.querySelector("i");
            if (icon) {
                icon.classList.toggle("fa-chevron-right", !isOpen);
                icon.classList.toggle("fa-chevron-down", isOpen);
            }
        }
    }
});



    </script>
</head>
<body>

<div class="container mt-3">
    <div class="row">
        <div class="col-md-3">
    
					<div class="list-group">
						<!-- Niveau 1 - Option 1 -->
						<a href="#submenu1_1" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
							<i class="fa fa-chevron-right me-2"></i>
							<span class="button-badge">
								<span class="badge_span bg-actions-co">
									<span class="material-icons-outlined">schedule</span>
								</span>
								<span class="badge-btn bg-actions-co-secondary">2</span>
							</span>
							Action Commercial
						</a>
						<div class="collapse ms-3" id="submenu1_1">
							<a href="#submenu2_1_1" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">play_arrow</span>
									</span>
									<span class="badge-btn bg-actions-co-secondary">2</span>
								</span>
								En cours
							</a>
							<div class="collapse ms-3" id="submenu2_1_1">
								<a href="#" class="list-group-item list-group-item-action">Lien 1.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 1.1.2</a>
							</div>
							<a href="#submenu2_1_2" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">fast_forward</span>
									</span>

								</span>
								Futur
							</a>
							<div class="collapse ms-3" id="submenu2_1_2">
								<a href="#" class="list-group-item list-group-item-action">Lien 1.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 1.1.2</a>
							</div>
						</div>

						<!-- Niveau 1 - Option 2 -->
						<a href="#submenu1_2" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
							<i class="fa fa-chevron-right me-2"></i>
							<span class="button-badge">
								<span class="badge_span bg-projets">
									<span class="material-icons-outlined">backup_table</span>
								</span>

							</span>
							Projet
						</a>
						<div class="collapse ms-3" id="submenu1_2">
							<a href="#submenu2_2_1" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">play_arrow</span>
									</span>
									<span class="badge-btn bg-actions-co-secondary">2</span>
								</span>
								En cours
							</a>
							<div class="collapse ms-3" id="submenu2_2_1">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_2_2" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">fast_forward</span>
									</span>

								</span>
								Futur
							</a>
							<div class="collapse ms-3" id="submenu2_2_2">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_2_3" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">delete</span>
									</span>
								</span>
								Annul√©
							</a>
							<div class="collapse ms-3" id="submenu2_2_3">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_2_4" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">done</span>
									</span>
								</span>
								Termin√©
							</a>
							<div class="collapse ms-3" id="submenu2_2_4">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
						</div>

						<!-- Niveau 1 - Option 3 -->
						<a href="#submenu1_3" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
							<i class="fa fa-chevron-right me-2"></i>
							<span class="button-badge">
								<span class="badge_span bg-besoins">
									<span class="material-icons-outlined">explore</span>
								</span>

							</span>
							Besoin
						</a>
						<div class="collapse ms-3" id="submenu1_3">
							<a href="#submenu2_3_1" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">play_arrow</span>
									</span>
									<span class="badge-btn bg-actions-co-secondary">2</span>
								</span>
								En cours
							</a>
							<div class="collapse ms-3" id="submenu2_3_1">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_3_2" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">fast_forward</span>
									</span>

								</span>
								Futur
							</a>
							<div class="collapse ms-3" id="submenu2_3_2">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_3_3" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">delete</span>
									</span>
								</span>
								Annul√©
							</a>
							<div class="collapse ms-3" id="submenu2_3_3">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_3_4" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">done</span>
									</span>
								</span>
								Termin√©
							</a>
							<div class="collapse ms-3" id="submenu2_3_4">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
						</div>

						<!-- Niveau 1 - Option 4 -->
						<a href="#submenu1_4" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
							<i class="fa fa-chevron-right me-2"></i>
							<span class="button-badge">
								<span class="badge_span bg-actions">
									<span class="material-icons-outlined">schedule</span>
								</span>

							</span>
							Action
						</a>
						<div class="collapse ms-3" id="submenu1_4">
							<a href="#submenu2_4_1" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">play_arrow</span>
									</span>
									<span class="badge-btn bg-actions-co-secondary">2</span>
								</span>
								En cours
							</a>
							<div class="collapse ms-3" id="submenu2_4_1">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_4_2" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">fast_forward</span>
									</span>

								</span>
								Futur
							</a>
							<div class="collapse ms-3" id="submenu2_4_2">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_4_3" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">delete</span>
									</span>

								</span>
								Annul√©
							</a>
							<div class="collapse ms-3" id="submenu2_4_3">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
							<a href="#submenu2_4_4" class="list-group-item list-group-item-action" data-bs-toggle="collapse">
								<i class="fa fa-chevron-right me-2"></i>
								<span class="button-badge">
									<span class="badge_span">
										<span class="material-icons-outlined">done</span>
									</span>
								</span>
                                Termin√©
							</a>
							<div class="collapse ms-3" id="submenu2_4_4">
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.1</a>
								<a href="#" class="list-group-item list-group-item-action">Lien 2.1.2</a>
							</div>
						</div>
					</div>
	
        </div>

        <div class="col-md-9">
            <h3>Contenu principal</h3>
            <p>Cliquez sur le menu pour naviguer entre les options.</p>
        </div>
    </div>
</div>
<style>
    .fa-chevron-up::before {
    content: none !important;
}

</style>
</body>
</html>
